(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"4nQW":function(t,e,n){"use strict";n.r(e);var o=n("q1tI"),r=n.n(o),i=n("i8i4"),a=(n("17x9"),n("IP2g")),s=n("twK/"),c=n("zHh7");function u(t){var e=t.messengerCount,n=t.translations,o=t.showMessenger,i=e,u=0===i?"grey":"tomato",l=0;switch(i.toString().length){case 2:l=1.45;break;case 3:l=1.2;break;case 4:l=.8;break;default:l=1.5}return r.a.createElement("span",{className:"fa-layers fa-fw",style:{marginRight:"0.3rem",minHeight:"120%",float:"right",marginTop:"0"},title:Object(c.a)(n,"Message Wall"),onClick:function(){return o()}},r.a.createElement(a.a,{className:0===i?"text-muted":"alert-success",icon:s.c}),r.a.createElement("span",{className:"fa-layers-counter",style:{background:u,margin:"0.80rem "+l+"rem 0 0"}},i))}function l(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function f(t){var e=t.notificationCount,n=t.translations,o=t.showNotifications,i=(l(t,["notificationCount","translations","showNotifications"]),e),u=0;switch(i.toString().length){case 2:u=1.25;break;case 3:u=1;break;case 4:u=.65;break;default:u=1.3}return r.a.createElement("span",{className:"fa-layers fa-fw",style:{marginRight:"0.3rem",minHeight:"120%",float:"right",marginTop:"-0.15rem"},title:Object(c.a)(n,"Notifications"),onClick:function(){return o()}},r.a.createElement(a.a,{className:0===i?"text-muted":"alert-success",icon:s.d}),r.a.createElement("span",{className:0===i?"fa-layers-counter text-counter-zero":"fa-layers-counter text-tomato",style:{margin:"0.97rem "+u+"rem 0 0"}},i))}u.defaultProps={messengerCount:0},f.defaultProps={notificationCount:0};var m=n("dWkn"),h=n("Hqpm");function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(){return(d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function y(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var v=function(t){function e(t){var n,o,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(n=!(r=g(e).call(this,t))||"object"!==p(r)&&"function"!=typeof r?w(o):r).displayTray=t.displayTray,n.locale=t.locale,n.isStaff=t.isStaff,n.otherProps=d({},t),n.state={likeCount:0,notificationCount:0,messengerCount:0},n.timeout=!0===n.isStaff?1e4:12e4,n.showNotifications=n.showNotifications.bind(w(w(n))),n.showMessenger=n.showMessenger.bind(w(w(n))),n.handleLogout=n.handleLogout.bind(w(w(n))),n.delay=(i=0,function(t,e){clearTimeout(i),i=setTimeout(t,e)}),n}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(e,o["Component"]),n=e,(i=[{key:"componentDidMount",value:function(){this.displayTray&&(this.loadNotification(250+2e3*Math.random()),this.loadMessenger(250+2e3*Math.random()))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.notificationTime),clearTimeout(this.messengerTime)}},{key:"loadNotification",value:function(t){var e=this;this.notificationTime=setTimeout(function(){Object(m.a)("/notification/details/",{method:"GET"},e.locale).then(function(t){t.count!==e.state.notiificationCount&&e.setState({notificationCount:t.count}),t.redirect&&Object(h.a)("/")}),e.loadNotification(e.timeout)},t)}},{key:"loadMessenger",value:function(t){var e=this;this.messengerTime=setTimeout(function(){Object(m.a)("/messenger/details/",{method:"GET"},e.locale).then(function(t){t.count!==e.state.messengerCount&&e.setState({messengerCount:t.count}),t.redirect&&Object(h.a)("/")}),e.loadMessenger(e.timeout)},t)}},{key:"showNotifications",value:function(){this.state.notificationCount>0&&Object(h.a)("/notification/show/",{method:"GET"},this.locale)}},{key:"showMessenger",value:function(){this.state.messengerCount>0&&Object(h.a)("/messenger/today/show/",{method:"GET"},this.locale)}},{key:"handleLogout",value:function(){Object(h.a)("/logout/",{method:"GET"},!1)}},{key:"render",value:function(){return this.displayTray?r.a.createElement("div",{className:"text-right"},r.a.createElement(u,d({messengerCount:this.state.messengerCount},this.otherProps,{showMessenger:this.showMessenger})),r.a.createElement(f,d({notificationCount:this.state.notificationCount},this.otherProps,{showNotifications:this.showNotifications}))):r.a.createElement("div",null)}}])&&y(n.prototype,i),a&&y(n,a),e}();v.defaultProps={displayTray:!1,locale:"en_GB"};var O=document.getElementById("notificationTray");null===O?Object(i.render)(r.a.createElement("div",null,"Â "),document.getElementById("dumpStuff")):Object(i.render)(r.a.createElement(v,window.TRAY_PROPS),O)},Hqpm:function(t,e,n){"use strict";function o(t,e,n){var o="_self";e&&"string"==typeof e.target&&(o=e.target);var r="";e&&"string"==typeof e.specs&&(r=e.specs),"boolean"==typeof n&&!1===n&&(n=""),null==n&&(n="en_GB"),""!==n&&(n="/"+n),window.open(window.location.protocol+"//"+window.location.hostname+n+t,o,r)}n.d(e,"a",function(){return o})},dWkn:function(t,e,n){"use strict";function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function r(t,e,n){var r={};e&&e.headers&&(r=e.headers,delete e.headers),r=o({},r,{"Content-Type":"application/json; charset=utf-8"}),null===n&&(n="en_GB"),!1!==n&&""!==t||(n="");var a=window.location.protocol+"//"+window.location.hostname+"/";return fetch(a+n+t,o({},e,{credentials:"same-origin",headers:r})).then(i).then(function(t){return t.text().then(function(t){return t.includes("window.Sfdump")?(console.log(t),""):"string"==typeof t?JSON.parse(t):""})})}function i(t){if(t.status>=200&&t.status<400)return t;var e=new Error(t.statusText);throw e.response=t,e}n.d(e,"a",function(){return r})},zHh7:function(t,e,n){"use strict";function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e in t){var o=t[e];for(var r in n)o=o.replace(r,n[r]+"");return o}for(var i in n)console.log(i,n),e=e.replace(i,n[i]+"");return e}n.d(e,"a",function(){return o})}},[["4nQW",0,1,2]]]);